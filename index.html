<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>SB Mobilya â€“ Full CMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{font-family:system-ui;background:#fafaf9}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.85);z-index:50}
.modal.active{display:flex}
</style>
</head>
<body>

<!-- DUYURU -->
<div id="announcement" class="hidden bg-amber-600 text-white text-center py-2 font-bold"></div>

<!-- NAV -->
<nav class="flex justify-between p-4 bg-white shadow sticky top-0 z-40">
<b>SB MOBÄ°LYA</b>
<button onclick="openAdmin()">âš™ï¸</button>
</nav>

<!-- HERO -->
<section class="relative h-[70vh] flex items-center justify-center text-white">
<div id="heroBg" class="absolute inset-0 bg-cover bg-center"></div>
<div class="absolute inset-0 bg-black/60"></div>
<div class="relative text-center px-6">
<h1 id="heroTitle" class="text-5xl font-black"></h1>
<p id="heroSubtitle" class="text-xl mt-4"></p>
</div>
</section>

<!-- KATEGORÄ°LER -->
<section class="max-w-7xl mx-auto py-16 px-6">
<div id="categories" class="grid md:grid-cols-3 gap-6"></div>
</section>

<!-- GALERÄ° -->
<div id="galleryModal" class="modal items-center justify-center">
<div class="bg-white p-6 rounded-xl max-w-5xl w-full">
<div class="flex justify-between mb-4">
<h2 id="galleryTitle" class="font-black"></h2>
<button onclick="closeGallery()">âœ–</button>
</div>
<div id="galleryImages" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
</div>
</div>

<!-- FOOTER -->
<footer class="bg-stone-900 text-white p-8 text-center space-y-2">
<p id="contact"></p>
</footer>

<!-- ADMIN -->
<div id="adminModal" class="modal items-center justify-center">
<div class="bg-white p-6 rounded-xl max-w-4xl w-full overflow-y-auto max-h-[90vh]">

<div id="loginBox">
<h2 class="font-black mb-4">Admin GiriÅŸ</h2>
<input id="pass" type="password" class="border p-2 w-full mb-3" placeholder="Åifre">
<button onclick="login()" class="bg-black text-white w-full py-2 rounded">GÄ°RÄ°Å</button>
</div>

<div id="adminPanel" class="hidden space-y-8">

<!-- DÄ°L -->
<select onchange="lang=this.value;render()" class="border p-2">
<option value="tr">TR</option>
<option value="en">EN</option>
<option value="de">DE</option>
</select>

<!-- HERO -->
<div>
<h3 class="font-black">HERO</h3>
<input class="border p-2 w-full mb-2" placeholder="BaÅŸlÄ±k" oninput="data.hero.title[lang]=this.value">
<input class="border p-2 w-full mb-2" placeholder="Alt BaÅŸlÄ±k" oninput="data.hero.subtitle[lang]=this.value">
<input class="border p-2 w-full" placeholder="Hero Foto URL" oninput="data.hero.bg=this.value">
</div>

<!-- DUYURU -->
<div>
<h3 class="font-black">DUYURU</h3>
<input class="border p-2 w-full mb-2" placeholder="Metin" oninput="data.announcement.text=this.value">
<label><input type="checkbox" onchange="data.announcement.active=this.checked"> Aktif</label>
</div>

<!-- KATEGORÄ° -->
<div>
<h3 class="font-black mb-2">KATEGORÄ°LER</h3>
<button onclick="addCategory()" class="bg-black text-white px-4 py-1 rounded mb-3">+ EKLE</button>
<div id="adminCategories"></div>
</div>

<!-- AI -->
<div>
<h3 class="font-black">ğŸ¤– Yapay Zeka (Sadece Mobilya)</h3>
<textarea id="aiQuestion" class="border p-2 w-full mb-2"
placeholder="Mobilya / dekorasyon hakkÄ±nda sor..."></textarea>
<button onclick="askAI()" class="bg-purple-600 text-white px-4 py-2 rounded">
AI'ye Sor
</button>
<p id="aiText" class="text-sm mt-2"></p>
</div>

<!-- Ä°STATÄ°STÄ°K -->
<div>
<h3 class="font-black">ğŸ“Š Ä°statistik</h3>
<canvas id="chart"></canvas>
</div>

<button onclick="save()" class="bg-emerald-600 text-white w-full py-3 rounded font-black">
KAYDET
</button>

</div>
</div>
</div>

<script>
let lang="tr";

const allowedKeywords=[
"mobilya","koltuk","masa","sandalye","dolap","mutfak","banyo",
"dekorasyon","iÃ§ mekan","tasarÄ±m","ahÅŸap","mdf","lake",
"gardÄ±rop","yatak","ofis","tezgah","tv","Ã¼nite"
];

let data={
hero:{
 title:{tr:"SÄ°Z HAYAL EDÄ°N",en:"YOU IMAGINE",de:"SIE TRÃ„UMEN"},
 subtitle:{tr:"Biz tasarlayalÄ±m",en:"We design",de:"Wir entwerfen"},
 bg:"https://images.unsplash.com/photo-1618221195710"
},
announcement:{text:"Yeni projeler yayÄ±nda!",active:true},
contact:"info@sbmobilya.com",
categories:[
 {title:{tr:"Mutfak",en:"Kitchen",de:"KÃ¼che"},gallery:[]}
],
stats:{visits:0,ai:0}
};

function render(){
data.stats.visits++;
heroTitle.innerText=data.hero.title[lang];
heroSubtitle.innerText=data.hero.subtitle[lang];
heroBg.style.backgroundImage=`url('${data.hero.bg}')`;

announcement.classList.toggle("hidden",!data.announcement.active);
announcement.innerText=data.announcement.text;

categories.innerHTML=data.categories.map((c,i)=>`
<div class="bg-white p-4 rounded shadow">
<h3 class="font-black mb-2">${c.title[lang]}</h3>
<button onclick="openGallery(${i})"
class="bg-amber-600 text-white px-3 py-1 rounded">
Galeri (${c.gallery.length})
</button>
</div>`).join("");

contact.innerText=data.contact;
renderAdmin();
renderChart();
}

function openGallery(i){
galleryTitle.innerText=data.categories[i].title[lang];
galleryImages.innerHTML=data.categories[i].gallery
.map(g=>`<img src="${g}" class="aspect-square object-cover rounded">`).join("");
galleryModal.classList.add("active");
}
function closeGallery(){galleryModal.classList.remove("active")}

function openAdmin(){adminModal.classList.add("active")}
function login(){
if(pass.value==="342134"){
loginBox.classList.add("hidden");
adminPanel.classList.remove("hidden");
}else alert("HatalÄ± ÅŸifre");
}

function addCategory(){
data.categories.push({
title:{tr:"Yeni",en:"New",de:"Neu"},
gallery:[]
});
render();
}

function renderAdmin(){
adminCategories.innerHTML=data.categories.map((c,i)=>`
<div class="border p-3 mb-3 rounded">
<input class="border p-1 w-full mb-1"
value="${c.title[lang]}"
oninput="data.categories[${i}].title[lang]=this.value">
<input type="file" multiple onchange="upload(${i},this)">
</div>`).join("");
}

function upload(i,input){
[...input.files].forEach(f=>{
const r=new FileReader();
r.onload=e=>{data.categories[i].gallery.push(e.target.result);render();}
r.readAsDataURL(f);
});
}

function isFurnitureQuestion(t){
t=t.toLowerCase();
return allowedKeywords.some(k=>t.includes(k));
}

function askAI(){
const q=aiQuestion.value.trim();
if(!q){aiText.innerText="Soru yaz.";return;}

if(!isFurnitureQuestion(q)){
aiText.innerText=
"âŒ Bu yapay zeka yalnÄ±zca mobilya ve dekorasyon ile ilgili sorulara cevap verir.";
return;
}

data.stats.ai++;
aiText.innerText=
"Bu konuda Ã¶nerim ÅŸudur:\n\n" +
"Mobilya seÃ§iminde kullanÄ±m alanÄ±, Ã¶lÃ§Ã¼, malzeme kalitesi ve uzun Ã¶mÃ¼rlÃ¼lÃ¼k temel kriterlerdir. " +
"Ä°htiyaca Ã¶zel Ã¼retim mobilyalar hem alan verimliliÄŸi hem de estetik aÃ§Ä±dan en iyi sonucu verir.";
renderChart();
}

function renderChart(){
new Chart(document.getElementById("chart"),{
type:"bar",
data:{
labels:["Ziyaret","AI KullanÄ±m"],
datasets:[{data:[data.stats.visits,data.stats.ai]}]
},
options:{responsive:true}
});
}

function save(){
localStorage.setItem("sb_full_cms",JSON.stringify(data));
alert("Kaydedildi");
}

const saved=localStorage.getItem("sb_full_cms");
if(saved) data=JSON.parse(saved);
render();
</script>

</body>
</html>
