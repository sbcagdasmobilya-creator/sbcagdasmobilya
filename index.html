<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SB Mobilya | CMS Galeri</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body { font-family: system-ui; background:#fafaf9 }
.modal {display:none;position:fixed;inset:0;background:rgba(0,0,0,.9);z-index:50}
.modal.active{display:flex}
</style>
</head>
<body>

<!-- DUYURU -->
<div id="announcementBar" class="hidden bg-amber-600 text-white text-center py-2 font-bold"></div>

<!-- NAV -->
<nav class="flex justify-between items-center p-6 bg-white shadow sticky top-0 z-40">
  <b>SB MOBİLYA</b>
  <a href="#admin" class="text-gray-400"><i class="fa fa-cog"></i></a>
</nav>

<!-- HERO -->
<header class="relative h-[70vh] flex items-center justify-center text-white">
  <div id="heroBg" class="absolute inset-0 bg-cover bg-center"></div>
  <div class="absolute inset-0 bg-black/60"></div>
  <div class="relative text-center px-6">
    <h1 id="heroTitle" class="text-5xl font-black mb-4"></h1>
    <p id="heroSubtitle" class="text-xl opacity-80"></p>
  </div>
</header>

<!-- KATEGORİLER -->
<section class="max-w-7xl mx-auto py-20 px-6">
  <div id="categoryGrid" class="grid md:grid-cols-3 gap-8"></div>
</section>

<!-- GALERİ MODAL -->
<div id="galleryModal" class="modal items-center justify-center">
  <div class="bg-white max-w-6xl w-full p-6 rounded-xl">
    <div class="flex justify-between mb-4">
      <h2 id="modalTitle" class="font-black text-xl"></h2>
      <button onclick="closeGallery()" class="text-2xl">&times;</button>
    </div>
    <div id="galleryContent" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
  </div>
</div>

<!-- FOOTER -->
<footer class="bg-stone-900 text-white p-10 text-center space-y-3">
  <div id="socials" class="flex justify-center gap-6 text-xl"></div>
  <p id="contactInfo" class="text-sm opacity-70"></p>
</footer>

<!-- ADMIN -->
<section id="admin" class="bg-stone-100 py-20 px-6">
<div class="max-w-6xl mx-auto">

<div id="login">
  <input id="pass" type="password" placeholder="Admin Şifre" class="p-3 rounded w-full mb-4">
  <button onclick="login()" class="bg-black text-white px-6 py-3 rounded w-full">GİRİŞ</button>
</div>

<div id="panel" class="hidden space-y-12">

<!-- HERO -->
<div>
<h3 class="font-black mb-2">HERO</h3>
<input class="border p-2 w-full mb-2" placeholder="Başlık" oninput="data.hero.title=this.value">
<input class="border p-2 w-full mb-2" placeholder="Alt başlık" oninput="data.hero.subtitle=this.value">
<input class="border p-2 w-full" placeholder="Hero Foto URL" oninput="data.hero.bg=this.value">
</div>

<!-- DUYURU -->
<div>
<h3 class="font-black mb-2">DUYURU</h3>
<input class="border p-2 w-full" placeholder="Duyuru Metni" oninput="data.announcement.text=this.value">
<label class="block mt-2">
<input type="checkbox" onchange="data.announcement.active=this.checked"> Aktif
</label>
</div>

<!-- SOSYAL -->
<div>
<h3 class="font-black mb-2">SOSYAL & İLETİŞİM</h3>
<input class="border p-2 w-full mb-2" placeholder="Instagram" oninput="data.socials.instagram=this.value">
<input class="border p-2 w-full mb-2" placeholder="Facebook" oninput="data.socials.facebook=this.value">
<input class="border p-2 w-full mb-2" placeholder="Pinterest" oninput="data.socials.pinterest=this.value">
<input class="border p-2 w-full mb-2" placeholder="E-posta" oninput="data.socials.email=this.value">
<input class="border p-2 w-full" placeholder="Konum" oninput="data.socials.location=this.value">
</div>

<!-- KATEGORİ -->
<div>
<div class="flex justify-between mb-2">
<h3 class="font-black">KATEGORİLER</h3>
<button onclick="addCategory()" class="bg-black text-white px-4 py-1 rounded">+ EKLE</button>
</div>
<div id="adminCats"></div>
</div>

<button onclick="save()" class="bg-emerald-600 text-white px-8 py-4 rounded w-full font-black">
KAYDET
</button>

</div>
</div>
</section>

<script>
let data={
 hero:{title:"SİZ HAYAL EDİN",subtitle:"Biz tasarlayalım",bg:"https://images.unsplash.com/photo-1618221195710"},
 announcement:{text:"Yeni projeler yayında!",active:true},
 socials:{instagram:"",facebook:"",pinterest:"",email:"",location:""},
 categories:[{title:"MUTFAKLAR",gallery:[]}]
};

function render(){
 heroTitle.innerText=data.hero.title;
 heroSubtitle.innerText=data.hero.subtitle;
 heroBg.style.backgroundImage=`url('${data.hero.bg}')`;

 announcementBar.classList.toggle("hidden",!data.announcement.active);
 announcementBar.innerText=data.announcement.text;

 socials.innerHTML="";
 if(data.socials.instagram) socials.innerHTML+=`<a href="${data.socials.instagram}"><i class="fab fa-instagram"></i></a>`;
 if(data.socials.facebook) socials.innerHTML+=`<a href="${data.socials.facebook}"><i class="fab fa-facebook"></i></a>`;
 if(data.socials.pinterest) socials.innerHTML+=`<a href="${data.socials.pinterest}"><i class="fab fa-pinterest"></i></a>`;

 contactInfo.innerText=`${data.socials.email} • ${data.socials.location}`;

 categoryGrid.innerHTML=data.categories.map((c,i)=>`
 <div class="bg-white p-6 rounded-xl shadow">
   <h3 class="font-black mb-2">${c.title}</h3>
   <button onclick="openGallery(${i})" class="bg-amber-600 text-white px-4 py-2 rounded">
   Galeri (${c.gallery.length})
   </button>
 </div>`).join("");

 renderAdmin();
}

function openGallery(i){
 modalTitle.innerText=data.categories[i].title;
 galleryContent.innerHTML=data.categories[i].gallery.map(g=>`
 <img src="${g}" class="aspect-square object-cover rounded">`).join("");
 galleryModal.classList.add("active");
}
function closeGallery(){galleryModal.classList.remove("active")}

function login(){
 if(pass.value==="3421"){
  login.style.display="none";
  panel.classList.remove("hidden");
 }
}

function addCategory(){
 data.categories.push({title:"Yeni Kategori",gallery:[]});
 render();
}

function renderAdmin(){
 adminCats.innerHTML=data.categories.map((c,i)=>`
 <div class="border p-4 mb-4 rounded">
 <input class="border p-2 w-full mb-2" value="${c.title}" oninput="data.categories[${i}].title=this.value">
 <input type="file" multiple onchange="upload(${i},this)">
 </div>`).join("");
}

function upload(i,input){
 [...input.files].forEach(f=>{
  const r=new FileReader();
  r.onload=e=>{data.categories[i].gallery.push(e.target.result);render();}
  r.readAsDataURL(f);
 })
}

function save(){
 localStorage.setItem("cms",JSON.stringify(data));
 alert("Kaydedildi");
}

const saved=localStorage.getItem("cms");
if(saved) data=JSON.parse(saved);
render();
</script>

</body>
</html>
