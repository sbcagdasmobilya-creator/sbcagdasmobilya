<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<style>
body{font-family:Arial;background:#f4f4f4;padding:20px}
.box{background:#fff;padding:20px;border-radius:10px;max-width:500px;margin:auto}
input,textarea{width:100%;padding:10px;margin:8px 0}
button{padding:10px 15px;background:#111;color:#fff;border:none;border-radius:6px;cursor:pointer}
button:hover{opacity:.8}
h2{text-align:center}
</style>
</head>
<body>

<div class="box">
<h2>√úr√ºn Ekle</h2>

<input type="text" id="urunAdi" placeholder="√úr√ºn Adƒ±">
<input type="text" id="urunFiyat" placeholder="Fiyat">
<textarea id="urunAciklama" placeholder="A√ßƒ±klama"></textarea>

<button onclick="urunEkle()">Kaydet</button>

<hr>

<h3>Eklenen √úr√ºnler</h3>
<div id="liste"></div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAP1kwGbsjt2pBuV5ozVkiDMhgCv7Tm_4g",
  authDomain: "sbcagdas-794f5.firebaseapp.com",
  projectId: "sbcagdas-794f5",
  storageBucket: "sbcagdas-794f5.firebasestorage.app",
  messagingSenderId: "139749695415",
  appId: "1:139749695415:web:2227dffd0bf982b7541232"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.urunEkle = async function() {

  const ad = document.getElementById("urunAdi").value;
  const fiyat = document.getElementById("urunFiyat").value;
  const aciklama = document.getElementById("urunAciklama").value;

  if(!ad || !fiyat){
    alert("√úr√ºn adƒ± ve fiyat bo≈ü olamaz");
    return;
  }

  await addDoc(collection(db, "products"), {
    ad,
    fiyat,
    aciklama,
    tarih: new Date()
  });

  alert("üî• Buluta Kaydedildi!");
  loadProducts();
}

async function loadProducts(){
  const liste = document.getElementById("liste");
  liste.innerHTML = "";

  const querySnapshot = await getDocs(collection(db, "products"));
  querySnapshot.forEach((doc) => {
    const data = doc.data();
    liste.innerHTML += `
      <div style="border-bottom:1px solid #ddd;padding:8px 0">
        <b>${data.ad}</b><br>
        ${data.fiyat} TL<br>
        <small>${data.aciklama || ""}</small>
      </div>
    `;
  });
}

loadProducts();

</script>

</body>
</html>
